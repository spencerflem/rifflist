<div class="archive">
  {% for post in site.posts reversed %}
      {% cycle 'add row' : '<div class="row">', nil, nil %}
          <div class="col-sm-4">
              <div class="preview-panel">
                  <a href="{{ post.url | prepend: site.baseurl }}">
                      <img src="{{ post.preview | prepend: site.baseurl }}">
                  </a>
                  {{ post.title }} - {{ post.date | date: "%B %-d, %Y" }}
             </div>
          </div>
      {% assign value = forloop.index | modulo:3 %}
      {% if value == 0 %}
        </div>
      {% endif %}
      {% if forloop.last %}
        {% value != 0}
      </div>
        {% endif %}
      {% endif %}
  {% endfor %}
</div>